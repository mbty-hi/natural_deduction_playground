<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playground</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="shortcut icon" type="image/ico" href="favicon.ico">
  <script src="script.js" defer></script>
</head>

<!-- I hope you like flexboxes and inline styling -->

<body>
<input type="file" id="file-input" style="display: none;"/>
<div
  id=content style="min-height: 100%; display:flex; flex-direction: column; margin-bottom: 10px;"
>
  <!-- Level selection panel, hidden by default -->
  <div
    id=level-panel style="display: none;" onclick="close_level_panel_click_handler(event, this)"
  >
    <div
      style="font-size: 200%; position: absolute; top: 20px; right: 20px; cursor: pointer;"
      onclick="close_level_panel()">&times;
    </div>

    <div
      class=gallery id=level-gallery style="max-width: 940px; padding: 20px; margin: auto;"
      onclick="close_level_panel_click_handler(event, this)"
    >
    </div>
  </div>


  <!-- Input panel, hidden by default -->
  <div id=input-panel style="display: none;" onclick="close_input_panel_click_handler(event, this)">
    <div
      style="font-size: 200%; position: absolute; top: 20px; right: 20px; cursor: pointer;"
      onclick="close_input_panel()">&times;
    </div>
    <div
      style="
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        height: 100%; gap: .5em;
      "
      onclick="close_input_panel_click_handler(event, this)"
    >
      <div
        id=input-panel-title
        style="
          margin: 15px; margin-bottom: 0; font-size: 200%; font-weight: bold; text-align: center;
        "
      ></div>
      <div id=input-panel-error-message style="color: var(--red); min-height: 1.5em;"></div>
      <input
        type=text id=input-panel-field
        style="
          margin: 15px; margin-bottom: 2px; font-size: 200%; font-weight: bold; text-align: center;
          border-radius: 6px;
        "
      ></input>
      <div
        class=rules style="display: flex; flex-wrap: wrap; width: fit-content;"
        onmousedown="event.preventDefault()"
      >
        <div
          class="rule-s pseudo-button"
          onmousedown="event.preventDefault()" onclick="insert_special_symbol(this)">&#x2227;</div>
        <div
          class="rule-s pseudo-button"
          onmousedown="event.preventDefault()" onclick="insert_special_symbol(this)">&#x2228;</div>
        <div
          class="rule-s pseudo-button"
          onmousedown="event.preventDefault()" onclick="insert_special_symbol(this)">&#x2194;</div>
        <div
          class="rule-s pseudo-button"
          onmousedown="event.preventDefault()" onclick="insert_special_symbol(this)">&#xAC;</div>
        <div
          class="rule-s pseudo-button"
          onmousedown="event.preventDefault()" onclick="insert_special_symbol(this)">&#x22A5;</div>
        <div
          class="rule-s pseudo-button"
          onmousedown="event.preventDefault()" onclick="insert_special_symbol(this)">&#x2192;</div>
      </div>
      <div
        id=input-panel-confirm class=pseudo-button
        style="
          background-color: var(--level-b); font-size: large; padding: 10px;
          border: 3px solid var(--black); border-radius: 10px;
        "
        onmousedown="event.preventDefault()"
      >
        Confirm
      </div>
    </div>
  </div>


  <h1 style="margin-bottom: 0">Natural deduction playground</h1>
  <p class=center>
  Fun for the whole family
  </p>

  <div
    class=box
    style="
      display: flex; gap: 1em; justify-content: space-around; margin-top: 1.2em;
      flex-wrap: wrap;
    "
  >
    <div class="action pseudo-button" onclick="open_level_panel()">Select exercise</div>
    <div style="display: flex; flex-direction: row; gap: 2em;">
      <div class="action pseudo-button" onclick="import_data()">Import</div>
      <div class="action pseudo-button" onclick="export_data()">Export</div>
    </div>
  </div>

  <div
    id=premises-mgmt-box class=box
    style="background-color: var(--level-c); margin: 15px 0 15px 0; display: flex;
           flex-direction: row; align-items: center; gap: 10px; flex-wrap: wrap;"
  >
    <span>Premises:</span>
    <div
      style="display: inline-flex; flex-direction: row; align-items: center; gap: 5px;
             flex-wrap: wrap;">
      <div id=premises style="display: inline-flex; gap: 5px; width: fit-content; flex-wrap: wrap;">
      </div>
      <div
        id="add-premise-button" class="expr pseudo-button" onclick="add_premise()"
        style="
          background-color: var(--lgreen);
          color: color-mix(in srgb, hsl(120 30% 50%), hsl(240 10% 35%) 30%);
          border-color: color-mix(in srgb, hsl(120 30% 50%), hsl(240 10% 17%) 30%);
          border-radius: 10px; height: 38px; padding: 0 10px;"
      >+</div>
    </div>
  </div>

  <div
    id=playground
    style="display: flex; flex-direction: row; justify-content: space-between;
           width: 100%; gap: 15px; margin-bottom: 10px; flex-wrap: wrap; height: 100%;
           flex: 1 1 auto;"
  >
    <div
      id="drag-box" class=box
      style="overflow: auto; flex-grow: 1; min-width: 55%; justify-content: flex-end();"
    >
    <div
      id="proof-top"
      style="display: flex; justify-content: center; align-items: flex-end; min-width: fit-content;
             height: 100%;"
    >
    <div
      id=proof
      style="text-align: center; align-items: center; display: flex; flex-direction: column;
             justify-content: flex-end; overflow: auto; user-select: none;"
    >
      <div class="subtree" style="padding: 10px;">
        <div class="hyps"></div>
        <div class="sep"></div>
        <div class="concl">
          <div
            id="focus"
            class="expr pseudo-button" onclick="set_focus(this)"
          >
          </div>
        </div>
      </div>
      </div>
      </div>
    </div>

    <div id=actions-box class=box
         style="display: flex; flex-direction: column; align-items: center;
                gap: 10px; justify-content: flex-start; flex-basis: 35%; flex-grow: 1;"
    >
      <div id=done-message style="color: var(--green); font-size: x-large; visibility: hidden;">
        Branch done
      </div>

      <div class=rules-box id=intro-rules>
        Intro rules:
        <div class=rules id=intro-rules-holder style="display: flex; height: 3em;">
        </div>
      </div>

      <div class=rules-box id=elim-rules>
        Elim rules:
        <div class=rules style="display: flex; flex-wrap: wrap; width: fit-content;">
          <div class="rule pseudo-button" onclick='apply_rule_with_arg("↔-elim-l", "Right branch of the iff:", iff_elim_l)'>↔-elim-l</div>
          <div class="rule pseudo-button" onclick='apply_rule_with_arg("↔-elim-r", "Left branch of the iff:", iff_elim_r)'>↔-elim-r</div>
          <div class="rule pseudo-button" onclick='apply_rule_with_arg("∧-elim-l", "Right branch of the and:", and_elim_l)'>∧-elim-l</div>
          <div class="rule pseudo-button" onclick='apply_rule_with_arg("∧-elim-r", "Left branch of the and:", and_elim_r)'>∧-elim-r</div>
          <div class="rule pseudo-button" onclick='apply_rule_with_arg("∨-elim", "Or hypothesis:", or_elim, validate_or_input)'>∨-elim</div>
          <div class="rule pseudo-button" onclick='apply_rule("DNE (classical)", dne)'>DNE</div>
          <div class="rule pseudo-button" onclick='apply_rule("⊥-elim", false_elim)'>⊥-elim</div>
          <div class="rule pseudo-button" onclick='apply_rule_with_arg("→-elim", "Implication condition:", impl_elim)'>→-elim</div>
        </div>
      </div>

      <div class=rules-box id=special-rules>
        Special:
        <div class=rules style="display: flex; flex-wrap: wrap; width: fit-content;">
          <div class="rule pseudo-button" onclick="apply_clear_above()">clear above</div>
          <div id="as-premise-button" class="rule pseudo-button" onclick="apply_as_premise()">as premise</div>
          <div id="change-button" class="rule pseudo-button" onclick="apply_change()">change</div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
